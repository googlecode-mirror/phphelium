* ---------------------------------------------------------------------
* FILE: register.tmp
* User login template
* ---------------------------------------------------------------------

<tmp:register>
<div class="clear"></div>
<div class="innerContent" style="margin-top:1.5em;">
    <div id="loginContainer">
        <div id="response"></div>
        <h2>Register</h2>

        <form method="POST" action="/register/" id="registerFrm">
            <div class="data">
                <label for="username">{$LANG[username]}:</label> <input type="text" name="username" id="username" size="30" validate="email" required />
            </div>
            <div class="data">
                <label for="password">{$LANG[password]}:</label> <input type="password" name="password" id="password" size="30" validate="filled" required />
            </div>
            <div class="data">
                <input type="button" name="btnSubmit" id="btnSubmit" value="{$LANG[register]}" />
                &nbsp;
                <input type="button" name="btnCancel" id="btnCancel" value="{$LANG[cancel]}" />
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">
$('#btnSubmit').click(function(event) {
    if (Validate.checkAll('registerFrm') == false) alert("There are errors with the form");
    else {
        ajax.onSuccess = function(e) {
alert(e); return;
            if (e['result'] == 'error') {
                formAssist.clear('registerFrm');
                Validate.clearAll('registerFrm');

                $('#response').html(e['msg']);
                $('#response').css('display','block');
                setTimeout(function() { $('#response').css('display','none'); },2000);
            } else {
                $('#registerContainer').html(e['msg']);
                setTimeout(function() { window.location = '/'; },2000);
            }
        }

        ajax.submit('registerFrm');
    }
});

$('#btnCancel').click(function(event) {
    window.location = '/';
});

$(document).ready(function() {
    Validate.autoValidate('registerFrm');
});
</script>
</tmp:register>

<tmp:successRegister>
<div class="success">
    {$LANG[successRegister]}
</div>
</tmp:successRegister>

<tmp:failRegister>
<div class="error">
    {$LANG[errorRegister]}
</div>
</tmp:failRegister>
